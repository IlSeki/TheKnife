<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.Font?>
<?import javafx.scene.chart.PieChart?>

<VBox spacing="20" xmlns="http://javafx.com/javafx" xmlns:fx="http://javafx.com/fxml/1" 
      fx:controller="com.example.theknife.RistoratoreDashboardController"
      stylesheets="@../../../data/stile.css">
    
    <padding>
        <Insets top="20" right="20" bottom="20" left="20"/>
    </padding>

    <!-- Header -->
    <HBox alignment="CENTER_LEFT" spacing="20">
        <Label text="Dashboard Ristoratore" styleClass="title-label" HBox.hgrow="ALWAYS">
            <font>
                <Font size="24.0"/>
            </font>
        </Label>
        <Button fx:id="menuRicercaButton" text="Menu Ricerca" styleClass="primary-button" onAction="#onMenuRicercaClick"/>
        <Button fx:id="aggiungiRistoranteButton" text="➕ Nuovo Ristorante" styleClass="primary-button" onAction="#onAggiungiRistoranteClick"/>
    </HBox>

    <!-- Main Content -->
    <SplitPane dividerPositions="0.4" VBox.vgrow="ALWAYS">
        <!-- Left Panel - Restaurant List -->
        <VBox spacing="10">
            <Label text="I Miei Ristoranti" styleClass="section-title">
                <font>
                    <Font size="18.0"/>
                </font>
            </Label>
            <TableView fx:id="ristorantiTable" VBox.vgrow="ALWAYS">
                <columns>
                    <TableColumn fx:id="nomeColumn" text="Nome" prefWidth="150"/>
                    <TableColumn fx:id="indirizzoColumn" text="Indirizzo" prefWidth="200"/>
                    <TableColumn fx:id="localitaColumn" text="Località" prefWidth="120"/>
                    <TableColumn fx:id="cucinaColumn" text="Cucina" prefWidth="150"/>
                    <TableColumn fx:id="prezzoColumn" text="Prezzo" prefWidth="80"/>
                </columns>
                <columnResizePolicy>
                    <TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/>
                </columnResizePolicy>
            </TableView>
        </VBox>

        <!-- Right Panel - Details and Stats -->
        <ScrollPane fitToWidth="true">
            <VBox spacing="20">
                <!-- Restaurant Details Section -->
                <VBox fx:id="detailsContainer" spacing="10" styleClass="details-section">
                    <Label text="Dettagli Ristorante" styleClass="section-title">
                        <font>
                            <Font size="18.0"/>
                        </font>
                    </Label>
                    <GridPane hgap="10" vgap="10">
                        <columnConstraints>
                            <ColumnConstraints minWidth="100"/>
                            <ColumnConstraints hgrow="ALWAYS"/>
                        </columnConstraints>
                        <Label text="Nome:" GridPane.rowIndex="0" GridPane.columnIndex="0"/>
                        <Label fx:id="nomeLabel" styleClass="details-value" GridPane.rowIndex="0" GridPane.columnIndex="1"/>
                        
                        <Label text="Indirizzo:" GridPane.rowIndex="1" GridPane.columnIndex="0"/>
                        <Label fx:id="indirizzoLabel" styleClass="details-value" GridPane.rowIndex="1" GridPane.columnIndex="1"/>
                        
                        <Label text="Cucina:" GridPane.rowIndex="2" GridPane.columnIndex="0"/>
                        <Label fx:id="cucinaLabel" styleClass="details-value" GridPane.rowIndex="2" GridPane.columnIndex="1"/>
                    </GridPane>

                    <!-- Statistics Section -->
                    <VBox spacing="10">
                        <Label text="Statistiche Recensioni" styleClass="section-title">
                            <font>
                                <Font size="16.0"/>
                            </font>
                        </Label>
                        <HBox spacing="20" alignment="CENTER_LEFT">
                            <VBox spacing="5">
                                <Label text="Media Stelle"/>
                                <Label fx:id="mediaLabel" styleClass="stats-value"/>
                            </VBox>
                            <VBox spacing="5">
                                <Label text="Totale Recensioni"/>
                                <Label fx:id="totaleRecensioniLabel" styleClass="stats-value"/>
                            </VBox>
                        </HBox>
                        <PieChart fx:id="recensioniChart"/>
                    </VBox>

                    <!-- Recent Reviews Section -->
                    <VBox spacing="10">
                        <HBox alignment="CENTER_LEFT" spacing="10">
                            <Label text="Ultime Recensioni" styleClass="section-title">
                                <font>
                                    <Font size="16.0"/>
                                </font>
                            </Label>
                            <Button fx:id="apriRecensioniButton" text="Vedi Tutte" styleClass="secondary-button" onAction="#onApriRecensioniClick"/>
                        </HBox>
                        <ListView fx:id="recensioniList" prefHeight="200"/>
                    </VBox>
                </VBox>
            </VBox>
        </ScrollPane>
    </SplitPane>
</VBox>